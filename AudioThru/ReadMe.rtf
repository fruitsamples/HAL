{\rtf1\mac\ansicpg10000\cocoartf102
{\fonttbl\f0\fnil\fcharset77 Verdana;\f1\fnil\fcharset77 Verdana-Bold;}
{\colortbl;\red255\green255\blue255;}
\vieww10760\viewh14380\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\ql\qnatural

\f0\fs36 \cf0 AudioThru \

\fs20 by Doug Wyatt, dwyatt@apple.com\
Copyright \'a9 2002 Apple, Inc.  All Rights Reserved\

\fs24 \
\
This little app does software audio play-through between two HAL devices.  The basic mechanism is a ring buffer into which input is stored until fetched by the output proc.\
\
You can choose input and output devices with the pop-up menus.  The source selector menus are not implemented.\
\
The Load sliders add CPU load (expressed as percentages of one I/O cycle) to the input and output I/O procs.\
\
The two devices are run at the same buffer size, controlled by the text field (in frames).  They must be set to the same sample rate and their first streams must have the same format.\
\
The program attempts to do thru with as little latency as possible, which is the sum of the two devices' safety offset, twice the HAL I/O buffer size, plus the measured phase difference between the input and output I/O procs.\
\
You can add extra latency, using the text box.  \
\
If the output I/O proc requests data that has not yet arrived in the input I/O proc, the Read error display shows how many samples behind the input is.  Increasing the extra latency by this amount will normally stop the errors.\
\
Some strange things happen sometimes when switching devices.  Click Restart if necessary.  When two devices drift, you'll need to do this.\
\
Be sure to click the Play Through checkbox to make the program actually work :-)\
\
Error-handling is minimal to non-existant.  Check your console, and if the disk starts grinding, look in the system log (/var/log/system.log).\
\
\

\f1\b REVISION HISTORY
\f0\b0 \
\
\ul 0.3.1, 30 August 2002\
\ulnone - Quit stops the audio devices first.\
- Reset turns off the I/O proc load.\
- Fix: removing I/O procs when stopping/restarting.\
\
\ul 0.3, 26 August 2002\ulnone \
- fix issues with determining offsets between input and output device sample clocks, display the actual thru latency as the two clocks may drift.\
\
\ul 0.2.1, 20 August 2002\ulnone \
- fix reporting of read errors, display nominal thru latency\
\
\ul 0.2, 20 August 2002\
\ulnone - fix synchronization between I/O threads by measuring the phase difference and incorporating it into the thru latency.  The extra buffer of latency needed for USB was apparently not related to the HAL clock or driver safety offsets.\
- add this help window\
\
\ul 0.1, 19 August 2002\
\ulnone original release\
\ul \
}